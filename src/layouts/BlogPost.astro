---
import SocialMetaTags from '../components/SocialMetaTags.vue';
import TagList from '../components/TagList.vue';
import metadata from '../metadata.json';
import Footer from './Footer.vue';
import Header from './Header.vue';
import Layout from './Layout.astro';

const { frontmatter } = Astro.props;

const pageTitle = `${frontmatter.title} | ${metadata.pageTitle}`;
const formattedDate = (() => {
  const date = new Date(frontmatter.publishedDate);
  return date.toLocaleDateString();
})();
---

<Layout title={pageTitle}>
  <SocialMetaTags
    contentType="article"
    url={frontmatter.url}
    title={pageTitle}
    description={frontmatter.description}
    imageUrl="/cover.png"
    slot="head"
  />
  <Header />
  <main>
    <h1 class="mb-4 text-2xl text-center">{frontmatter.title}</h1>
    <p class="mb-8 text-sm text-center">
      Published
      <time datetime={frontmatter.publishedDate.toString()}>
        {formattedDate}
      </time>
    </p>
    <slot />
  </main>
  <Footer>
    <TagList tags={frontmatter.tags} />
  </Footer>
</Layout>
